{% extends "photo/gphpbase.html" %}

{% block title %}Main Photo Blog{% endblock %}

{% block head %}
<!-- VOTING scripts and styles -->
<script type='text/javascript' src='/site_media/scripts/vote_single_view.js'></script>
<!-- PHOTO UPLOAD scripts and styles -->
<link rel="stylesheet" href="/site_media/styles/upload_photo_style.css" type="text/css" />
<script type='text/javascript' src='/site_media/scripts/photo_uploader.js'></script> 
<!-- COMMENTS scripts and styles -->
<script type='text/javascript' src='/site_media/scripts/jquery.form.js'></script>
<script type='text/javascript' src='/site_media/scripts/comment_system.js'></script>
<link rel="stylesheet" href="/site_media/styles/avesome_buttons.css" type="text/css" media="screen" charset="utf-8" />
{% endblock %}


{% block sidebar %}
{% include "photo/upload_photo_panel.html" %}
{% endblock %}



{% block content %}


{% load thumbnail %}
{% load pagination_tags %}
{% load votes %}
{% load comments_for_item %}

<div class="main">
    <!-- Posts in blog  -->
        {% if request.user.is_authenticated %}
            <h5>Photoblog of <b>{{ user }}</b></h5>
        {% else %}
            <h5>Photoblog</h5>
        {% endif %}
        {% autopaginate items 5 %}
        {% add_voted user.pk items as items %}
        {% for item in items %}
        <div class="photo_instance" data-id="{{ item.pk }}">
            {% include "photo/voter.html" %}
            <div class="phtitle"><b>Photo:</b> {{ item.title }}</div>
            <div class="title"><b>posted:</b> {{ item.created }} by {{ item.user }}</div>
            <div class="title"><b>original:</b>{{ item.width }} x {{ item.height }}</div>
            <div class="title"><b>rating:</b><span class="rating-{{item.pk}}">{{ item.rating }}</span></div>
            <a href="{% url photo.views.single_image_view item.pk %}">
                {% thumbnail item.image "701x501" crop="center" as im %}
                    <img src="{{ im.url }}" width="{{ im.width }}" height="{{ im.height }}">
                {% endthumbnail %}
            </a>
            <div class="metadata"><b>(c):</b>{{ item.user }}</div>
            <hr>
            <div class="comments">
            {% add_comments_for_item item 3 as comments %}
            {% include "comments/comment_system.html" %}
            </div>
         </div>
        {% endfor %}
        {% paginate %}
    </div>
    <hr> <p>Thanks for visiting my site.</p>
{% endblock %}
